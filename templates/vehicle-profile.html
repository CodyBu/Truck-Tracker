{% extends 'layout.html' %}

{% block title %}Vehicle Profile{% endblock %}

{% block content %}

<main>
  <div class="container py-4">
    <header class="pb-3 mb-4 border-bottom">
      <div class="d-grid gap-2 d-md-block">
      <div> <a class="btn btn-secondary btn-sm btn-block" href="{{ url_for('home') }}"><i class="fas fa-user"></i>Back</a></div>
      </div>
    </header>

    <div class="p-5 mb-4 bg-light border rounded-3 text-center container">
      <div class="container-md py-5 d-grid gap-4">
        <h2 class="fw-bold">{{ vehicle.VehicleID }}</h2>
        <table class="table table-striped table-hover table-bordered table-responsive">
          <thead>
          <tr>
            <th scope="col">Vehicle ID</th>
            <th scope="col">VIN Number</th>
            <th scope="col">License Plate</th>
            <th scope="col">Mileage</th>
          </tr>
          </thead>

          <tbody>
            <tr>
                <td>{{ vehicle.VehicleID }}</td>
                <td>{{ vehicle.VIN }}</td>
                <td>{{ vehicle.LicensePlate }}</td>
                <td>{{ vehicle.Mileage }}</td>
            </tr>
          </tbody>
        </table>
        {% if type == 'Admin' %}
        <div class="d-grid gap-2 d-md-block">
          <a class="btn btn-danger btn-sm btn-block" href="{{ url_for('deleteVehicle') }}" role="button" onclick="return confirm('Are you sure you want to delete this vehicle?')">Delete Vehicle</a>
        </div>
        {% endif %}
      </div>
    </div>

    <p>
      <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
        Maintenance
      </a>
    </p>
    <div class="collapse" id="collapseExample">
      <div class="card card-body">
        <div class="p-5 mb-4 bg-light border rounded-3 text-center container">
          <div class="container-md py-5 d-grid gap-4">
            <h2 class="fw-bold">Maintenance</h2>
            <form action="{{ url_for('viewEntry') }}" method="post">
            <table class="table table-striped table-hover table-bordered table-responsive">
              <thead>
              <tr>
                <th></th>
                <th scope="col">ID</th>
                <th scope="col">Date</th>
                <th scope="col">Mileage</th>
                <th scope="col">Services</th>             
                <th scope="col">Requester</th>

              </tr>
              </thead>
                  {% for entry in entries %}
              <tbody>
                <tr>
                  <td><input type="radio" name="selected" value="{{ entry.EntryID }}"></td>
                  <td>{{ vehicle.VehicleID }}</td>
                  <td>{{ entry.EntryDate }}</td>
                  <td>{{ entry.MileageAtTime }}</td>
                  <td><ul>
                    {% for service in serviceList %}
                    {% if service.Entry == entry.EntryID %}
                      <li>{{ service.Service }}</li>
                    {% endif %}
                  {% endfor %}
                  </ul>
                  </td>                  
                  <th>{{ entry.Requester }}</th>
                </tr>
              </tbody>
                {% endfor %}
            </table>

            </form>
        </div>
        <div> <a class="btn btn-primary btn-lg btn-block" href="{{ url_for('addEntry') }}">Add Maintenance</a></div>
        </div>
      </div>
    </div>
<br>
    <p>
      <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample1" role="button" aria-expanded="false" aria-controls="collapseExample">
        Notes
      </a>
    </p>
    <div class="collapse" id="collapseExample1">
      <div class="card card-body">
        <div class="p-5 mb-4 bg-light border rounded-3 text-center container">
          <div class="container-md py-5 d-grid gap-4">
            <h2 class="fw-bold">Notes</h2>
            <form action="{{ url_for('viewEntry') }}" method="post">
            <table class="table table-striped table-hover table-bordered table-responsive">
              <thead>
              <tr>
                <th></th>
                <th scope="col">ID</th>
                <th scope="col">Date</th>
                <th scope="col">Mileage</th>

              </tr>
              </thead>
                  {% for entry in entries %}
              <tbody>
                <tr>
                  <td><input type="radio" name="selected" value="{{ entry.EntryID }}" id="{{ entry.EntryID }}"></td>
                  <td>{{ vehicle.VehicleID }}</td>
                  <td>{{ entry.EntryDate }}</td>
                  <td>{{ entry.MileageAtTime }}</td>
                </tr>
              </tbody>
                {% endfor %}
            </table>

              <div> <a class="btn btn-primary btn-lg btn-block" href="{{ url_for('viewNotes') }}">View Note</a></div>
            </form>
        </div>
        <div> <a class="btn btn-primary btn-lg btn-block" href="{{ url_for('addNote') }}">Add Note</a></div>
        </div>
      </div>
    </div>
  </div>
</main>

{% endblock %}
